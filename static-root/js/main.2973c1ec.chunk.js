(this["webpackJsonpstockpre-web"]=this["webpackJsonpstockpre-web"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),o=n(6),r=n.n(o),a=(n(13),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),o(e),r(e)}))}),i=n(8),u=n(1),l=n(3),d=n(2);function j(e,t,n,c){var s;c&&(s=JSON.stringify(c));var o=new XMLHttpRequest,r="http://127.0.0.1:8000/api".concat(t);o.responseType="json";var a=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),c=0;c<n.length;c++){var s=n[c].trim();if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}return t}("csrftoken");o.open(e,r),o.setRequestHeader("Content-Type","application/json"),a&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-CSRFToken",a)),o.onload=function(){403===o.status&&("Authentication credentials were not provided."===o.response.detail&&-1===window.location.href.indexOf("login")&&(window.location.href="/login?showLoginRequired=true"));n(o.response,o.status)},o.onerror=function(e){n({message:"Request was an error"},400)},o.send(s)}function f(e){var t=e.stock;return Object(u.jsx)("div",{children:t.ticker})}function b(e){var t=Object(c.useState)([]),n=Object(d.a)(t,2),o=n[0],r=n[1],a=Object(c.useState)([]),i=Object(d.a)(a,2),b=i[0],O=i[1],k=Object(c.useState)(!1),h=Object(d.a)(k,2),p=h[0],g=h[1];return Object(c.useEffect)((function(){var t=Object(l.a)(e.newStocks).concat(o);t.length!==b.length&&O(t)}),[e.newStocks,b,o]),Object(c.useEffect)((function(){if(!1===p){j("GET","/stocks/",(function(e,t){200===t&&(r(Object(l.a)(e)),g(!0))}))}}),[o,p,g,e.username]),Object(u.jsx)(s.a.Fragment,{children:null!==b&&b.map((function(e,t){return Object(u.jsx)(f,{stock:e,className:"my-5 py-5 border bg-white text-dark"},"".concat(t,"-{item.id}"))}))})}function O(e){var t=e.stock;return Object(u.jsx)("span",{onClick:function(e){window.location.href="/stocks/".concat(t.ticker)},children:t.ticker})}function k(e){var t=e.ticker,n=Object(c.useState)(!1),s=Object(d.a)(n,2),o=s[0],r=s[1],a=Object(c.useState)(null),i=Object(d.a)(a,2),l=i[0],b=i[1],O=function(e,t){200===t?b(e):alert("Error finding stock")};return Object(c.useEffect)((function(){var e;!1===o&&(e=O,j("GET","/stocks/".concat(t),e),r(!0))}),[t,o,r]),null===l?null:Object(u.jsx)(f,{stock:l,className:e.className})}var h=s.a.createElement,p=document.getElementById("stocks-list");p&&r.a.render(h((function(e){var t=Object(c.useState)([]),n=Object(d.a)(t,2),s=n[0];return n[1],Object(u.jsx)("div",{className:e.className,children:Object(u.jsx)(b,Object(i.a)({newStocks:s},e))})}),p.dataset),p);var g=document.getElementById("stocks-search");p&&r.a.render(h((function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),s=n[0],o=n[1],r=Object(c.useState)([]),a=Object(d.a)(r,2),i=a[0],f=a[1];return Object(c.useEffect)((function(){!function(e,t){j("POST","/stocks/search",t,{searchTerm:e})}(s,(function(e,t){200===t?f(Object(l.a)(e)):alert("Error finding stock")}))}),[s]),Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{type:"text",placeholder:"Search",value:s,onChange:function(e){o(e.target.value)}}),""!==s&&Object(u.jsx)("ul",{children:i.map((function(e,t){return Object(u.jsx)("li",{children:Object(u.jsx)(O,{stock:e},"".concat(t,"-{item.id}"))})}))})]})}),g.dataset),g),document.querySelectorAll(".stocks-detail").forEach((function(e){r.a.render(h(k,e.dataset),e)})),a()}},[[15,1,2]]]);
//# sourceMappingURL=main.2973c1ec.chunk.js.map