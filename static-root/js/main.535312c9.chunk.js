(this["webpackJsonpstockpre-web"]=this["webpackJsonpstockpre-web"]||[]).push([[0],{17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),r=n(10),i=n.n(r),s=(n(17),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),o(e),r(e),i(e)}))}),a=(n(18),n(1)),u=n(12),l=n(4),j=n(2);function d(e,t,n,c){var o;c&&(o=JSON.stringify(c));var r=new XMLHttpRequest,i="http://127.0.0.1:8000/api".concat(t);r.responseType="json";var s=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),c=0;c<n.length;c++){var o=n[c].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}("csrftoken");r.open(e,i),r.setRequestHeader("Content-Type","application/json"),s&&(r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",s)),r.onload=function(){403===r.status&&("Authentication credentials were not provided."===r.response.detail&&-1===window.location.href.indexOf("login")&&(window.location.href="/login?showLoginRequired=true"));n(r.response,r.status)},r.onerror=function(e){n({message:"Request was an error"},400)},r.send(o)}function f(e){var t=e.stock;return Object(a.jsx)("div",{children:t.ticker})}function b(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),o=n[0],r=n[1],i=Object(c.useState)([]),s=Object(j.a)(i,2),u=s[0],f=s[1],b=Object(c.useState)(!1),O=Object(j.a)(b,2),h=O[0],v=O[1];return Object(c.useEffect)((function(){var t=Object(l.a)(e.newStocks).concat(o);t.length!==u.length&&f(t)}),[e.newStocks,u,o]),Object(c.useEffect)((function(){if(!1===h){d("POST","/stocks/",(function(e,t){200===t&&(r(Object(l.a)(e)),v(!0))}))}}),[o,h,v]),Object(a.jsxs)("div",{children:["List will turn into list of widgets",null!==u&&u.map((function(e,t){return Object(a.jsx)(k,{stock:e},t)}))]})}function O(e){var t=e.ticker,n=e.isTracking,c=e.handleActionBackend,o=!0===n?"Remove":"Add";return Object(a.jsxs)("button",{onClick:function(e){e.preventDefault(),function(e,t){d("POST","/stocks/".concat(e,"/action"),t)}(t,c)},children:[" ",o," "]})}function k(e){var t=e.stock;return Object(a.jsx)("div",{onClick:function(e){e.preventDefault(),window.location.href="/stocks/".concat(t.ticker)},children:t.ticker})}function h(e){var t=e.ticker,n=Object(c.useState)(!1),o=Object(j.a)(n,2),r=o[0],i=o[1],s=Object(c.useState)(null),u=Object(j.a)(s,2),l=u[0],b=u[1],k=function(e,t){200===t?(console.log(e),b(e)):alert("Error finding stock")};return Object(c.useEffect)((function(){!1===r&&(!function(e,t){d("GET","/stocks/".concat(e),t)}(t,k),i(!0))}),[t,r,i]),null===l?null:Object(a.jsxs)("div",{children:[Object(a.jsx)(f,{stock:l,className:e.className}),Object(a.jsx)(O,{ticker:l.ticker,isTracking:l.is_tracking,handleActionBackend:function(e,t){200===t?b(e):alert("cant add/remove")}})]})}var v=n(22),p=n(23),g=n(24);function x(e){var t=e.stock;return Object(a.jsxs)("span",{onClick:function(e){e.preventDefault(),window.location.href="/stocks/".concat(t.ticker)},children:[t.ticker," "]})}function w(e){return Object(a.jsx)("span",{onClick:function(e){e.preventDefault(),window.location.href="/"},children:"HomeLink"})}function m(e){return Object(a.jsx)("span",{children:"ProfileLink"})}function S(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),o=n[0],r=n[1],i=Object(c.useState)([]),s=Object(j.a)(i,2),u=s[0],f=s[1];return Object(c.useEffect)((function(){!function(e,t){d("POST","/stocks/search",t,{searchTerm:e})}(o,(function(e,t){200===t?f(Object(l.a)(e)):alert("Error finding stock")}))}),[o]),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",placeholder:"Search",value:o,onChange:function(e){r(e.target.value)}}),""!==o&&Object(a.jsx)("ul",{children:u.map((function(e,t){return Object(a.jsx)("li",{children:Object(a.jsx)(x,{stock:e},e.id)})}))})]})}var T=o.a.createElement,C=document.getElementById("stocks-list");C&&i.a.render(T((function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),o=n[0];return n[1],Object(a.jsx)("div",{className:e.className,children:Object(a.jsx)(b,Object(u.a)({newStocks:o},e))})}),C.dataset),C);var E=document.getElementById("navbar");E&&i.a.render(T((function(e){return Object(a.jsx)(v.a,{children:Object(a.jsxs)(p.a,{children:[Object(a.jsxs)(g.a,{children:[" ",Object(a.jsx)(S,{})," "]}),Object(a.jsxs)(g.a,{children:[" ",Object(a.jsx)(w,{})," "]}),Object(a.jsxs)(g.a,{children:[" ",Object(a.jsx)(m,{}),"  "]})]})})}),E.dataset),E),document.querySelectorAll(".stock-detail").forEach((function(e){i.a.render(T(h,e.dataset),e)})),s()}},[[20,1,2]]]);
//# sourceMappingURL=main.535312c9.chunk.js.map