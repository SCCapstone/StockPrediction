(this["webpackJsonpstockpre-web"]=this["webpackJsonpstockpre-web"]||[]).push([[0],{294:function(e,t,n){},298:function(e,t,n){},310:function(e,t){},341:function(e,t){},343:function(e,t){},353:function(e,t){},355:function(e,t){},380:function(e,t){},382:function(e,t){},383:function(e,t){},388:function(e,t){},390:function(e,t){},409:function(e,t){},421:function(e,t){},424:function(e,t){},429:function(e,t){},431:function(e,t){},454:function(e,t){},550:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r=n(26),s=n.n(r),a=(n(294),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,594)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),o(e),i(e),r(e),s(e)}))}),c=(n(295),n(31)),l=n(40),u=n(2),d=n(35),p=n.n(d),h=n(64),_=n(17);function f(e,t,n,o){var i;o&&(i=JSON.stringify(o));var r=new XMLHttpRequest,s="".concat("http://127.0.0.1:8000/api").concat(t);r.responseType="json";var a=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var i=n[o].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return t}("csrftoken");r.open(e,s),r.setRequestHeader("Content-Type","application/json"),a&&(r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",a)),r.onload=function(){403===r.status&&("Authentication credentials were not provided."===r.response.detail&&-1===window.location.href.indexOf("login")&&(window.location.href="/login?showLoginRequired=true"));n(r.response,r.status)},r.onerror=function(e){n({message:"Request was an error"},400)},r.send(i)}function b(e,t){f("POST","/prediction/",t,{ticker:e})}var m=function(){return(m=Object.assign||function(e){for(var t,n=arguments,o=1,i=arguments.length;o<i;o++)for(var r in t=n[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function g(e,t){var n=m({},e);for(var o in t)"object"!=typeof e[o]||null===e[o]||Array.isArray(e[o])?void 0!==t[o]&&(n[o]=t[o]):n[o]=g(e[o],t[o]);return n}var v={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},y={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};var j=function(){function e(e){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=g(y,e),e.preset){var t=v[e.preset];t?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(t.disabled_features):this._options.disabled_features=t.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(t.enabled_features):this._options.enabled_features=t.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return e.prototype.onChartReady=function(e){this._ready?e.call(this):this._readyHandlers.push(e)},e.prototype.headerReady=function(){var e=this;return this._innerWindowLoaded.then((function(){return e._innerWindow().headerReady()}))},e.prototype.onGrayedObjectClicked=function(e){this._innerAPI().onGrayedObjectClicked(e)},e.prototype.onShortcut=function(e,t){this._innerWindow().createShortcutAction(e,t)},e.prototype.subscribe=function(e,t){this._innerAPI().subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._innerAPI().unsubscribe(e,t)},e.prototype.chart=function(e){return this._innerAPI().chart(e)},e.prototype.getLanguage=function(){return this._options.locale},e.prototype.setSymbol=function(e,t,n){this._innerAPI().changeSymbol(e,t,n)},e.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},e.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},e.prototype.selectLineTool=function(e){this._innerAPI().selectLineTool(e)},e.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},e.prototype.save=function(e){this._innerAPI().saveChart(e)},e.prototype.load=function(e,t){this._innerAPI().loadChart({json:e,extendedData:t})},e.prototype.getSavedCharts=function(e){this._innerAPI().getSavedCharts(e)},e.prototype.loadChartFromServer=function(e){this._innerAPI().loadChartFromServer(e)},e.prototype.saveChartToServer=function(e,t,n){this._innerAPI().saveChartToServer(e,t,n)},e.prototype.removeChartFromServer=function(e,t){this._innerAPI().removeChartFromServer(e,t)},e.prototype.onContextMenu=function(e){this._innerAPI().onContextMenu(e)},e.prototype.createButton=function(e){return this._innerWindow().createButton(e)},e.prototype.showNoticeDialog=function(e){this._innerAPI().showNoticeDialog(e)},e.prototype.showConfirmDialog=function(e){this._innerAPI().showConfirmDialog(e)},e.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},e.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},e.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},e.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},e.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},e.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},e.prototype.addCustomCSSFile=function(e){this._innerWindow().addCustomCSSFile(e)},e.prototype.applyOverrides=function(e){this._options=g(this._options,{overrides:e}),this._innerWindow().applyOverrides(e)},e.prototype.applyStudiesOverrides=function(e){this._innerWindow().applyStudiesOverrides(e)},e.prototype.watchList=function(){return this._innerAPI().watchlist()},e.prototype.activeChart=function(){return this._innerAPI().activeChart()},e.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},e.prototype.layout=function(){return this._innerAPI().layout()},e.prototype.setLayout=function(e){this._innerAPI().setLayout(e)},e.prototype.layoutName=function(){return this._innerAPI().layoutName()},e.prototype.changeTheme=function(e,t){this._innerWindow().changeTheme(e,t)},e.prototype.getTheme=function(){return this._innerWindow().getTheme()},e.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},e.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},e.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},e.prototype.drawOnAllCharts=function(e){this._innerAPI().drawOnAllCharts(e)},e.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},e.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},e.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},e.prototype.setIntervalLinkingEnabled=function(e){this._innerAPI().setIntervalLinkingEnabled(e)},e.prototype.setTimeFrame=function(e){this._innerAPI().setTimeFrame(e)},e.prototype.symbolSync=function(){return this._innerAPI().symbolSync()},e.prototype.intervalSync=function(){return this._innerAPI().intervalSync()},e.prototype.crosshairSync=function(){return this._innerAPI().crosshairSync()},e.prototype.timeSync=function(){return this._innerAPI().timeSync()},e.prototype.getAllFeatures=function(){return this._innerWindow().getAllFeatures()},e.prototype.clearUndoHistory=function(){return this._innerAPI().clearUndoHistory()},e.prototype.undo=function(){return this._innerAPI().undo()},e.prototype.redo=function(){return this._innerAPI().redo()},e.prototype.startFullscreen=function(){this._innerAPI().startFullscreen()},e.prototype.exitFullscreen=function(){this._innerAPI().exitFullscreen()},e.prototype.takeClientScreenshot=function(e){return this._innerAPI().takeClientScreenshot(e)},e.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},e.prototype._innerWindow=function(){return this._iFrame.contentWindow},e.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},e.prototype._create=function(){var e=this,t=this._render(),n=document.getElementById(this._options.container_id);if(null===n)throw new Error("There is no such element - #"+this._options.container_id);n.innerHTML=t,this._iFrame=n.querySelector("#"+this._id);var o=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(o.style.width="100%",this._options.fullscreen||(o.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise((function(e){o.addEventListener("load",(function t(){o.removeEventListener("load",t,!1),e()}),!1)})),this._innerWindowLoaded.then((function(){e._innerWindow().widgetReady((function(){e._ready=!0;for(var t=0,n=e._readyHandlers;t<n.length;t++){var o=n[t];try{o.call(e)}catch(i){console.error(i)}}e._innerWindow().initializationFinished()}))}))},e.prototype._render=function(){var e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");var t=(this._options.library_path||"")+(encodeURIComponent(this._options.locale)+"-tv-chart.b555c6a4.html#symbol=")+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},e}();window.TradingView=window.TradingView||{},window.TradingView.version=function(){return"CL v18.043 (internal id b555c6a4 @ 2021-02-18T09:41:15.150Z)"};var w=n(279),O=(n.p,n(298),"bua1l2n48v6q418fsepg");document.cookie="X-Authorization=".concat(O,"; path=/");var k=new WebSocket("wss://ws.finnhub.io?token=".concat(O));document.cookie="X-Authorization=".concat(O,"; path=/");var x=new Map;k.onopen=function(e){console.log("Socket connected")},k.onclose=function(e){console.log("Socket disconnected:",e)},k.onerror=function(e){console.log("Socket error:",e)},k.onmessage=function(e){var t=JSON.parse(e.data),n=t.data;"trade"===t.type&&n.forEach((function(e){var t=e.p,n=e.s,o=e.t,i=x.get(n);if(void 0!==i){var r=i.lastDailyBar;if(void 0!==r){var s,a=function(e){var t=new Date(e);return t.setDate(t.getDate()+1),t.getTime()}(r.time);s=o>=a?{time:o,open:t,high:t,low:t,close:t}:Object(c.a)(Object(c.a)({},r),{},{high:Math.max(r.high,t),low:Math.min(r.low,t),close:t}),i.lastDailyBar=s,i.handlers.forEach((function(e){return e.callback(s)}))}else i.lastDailyBar={time:o,open:t,high:t,low:t,close:t}}}))},n(299).ApiClient.instance.authentications.api_key.apiKey=O;var S=new Map,C={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"NYSE",name:"NYSE",desc:"New York Stock Exchange"}],symbol_types:[{name:"Common Stock",value:"stock"}]},I={onReady:function(e){setTimeout((function(){return e(C)}))},resolveSymbol:function(){var e=Object(h.a)(p.a.mark((function e(t,n,o){var i,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://finnhub.io/api/v1/stock/symbol?exchange=US&token=".concat(O));case 2:return e.next=4,e.sent.json();case 4:if(i=e.sent,r=i.find((function(e){var n=e.displaySymbol;return t===n}))){e.next=9;break}return o("Cannot resolve symbol: ".concat(t)),e.abrupt("return");case 9:s={ticker:r.symbol,name:r.displaySymbol,description:r.description,type:r.type,session:"24x7",timezone:"Etc/UTC",exchange:"NYSE",minmov:1,pricescale:100,has_intraday:!1,has_no_volume:!0,has_weekly_and_monthly:!1,supported_resolutions:C.supported_resolutions,volume_precision:2,data_status:"streaming"},n(s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),getBars:function(){var e=Object(h.a)(p.a.mark((function e(t,o,i,r,s,a,u){var d,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={"1D":"D","1W":"W","1M":"M"},h=n(329),e.next=4,h("https://finnhub.io/api/v1/stock/candle?symbol=".concat(t.ticker,"&resolution=").concat(d[o],"&from=").concat(i,"&to=").concat(r,"&token=").concat(O),{json:!0},(function(e,n,o){if(e)a(e);else if("no_data"!==o.s){for(var i=o.t.length,r=[],d=0;d<i;d+=1)r=[].concat(Object(l.a)(r),[{time:1e3*o.t[d],low:o.l[d],high:o.h[d],open:o.o[d],close:o.c[d]}]);u&&S.set(t.displaySymbol,Object(c.a)({},r[r.length-1])),s(r,{noData:!1})}else s([],{noData:!0})}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,o,i,r,s,a){return e.apply(this,arguments)}}(),searchSymbols:function(){var e=Object(h.a)(p.a.mark((function e(t,n,o,i){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("SEARCHED");case 1:case"end":return e.stop()}}),e)})));return function(t,n,o,i){return e.apply(this,arguments)}}(),subscribeBars:function(e,t,n,o,i){!function(e,t,n,o,i,r){var s={id:o,callback:n},a=x.get(e);a?a.handlers.push(s):(a={subscribeUID:o,resolution:t,lastDailyBar:r,handlers:[s]},x.set(e,a),console.log("[subscribeBars]: Subscribe to streaming symbol:",e),k.send(JSON.stringify({type:"subscribe",symbol:e})))}(e.ticker,t,n,o,0,S.get(e.ticker))},unsubscribeBars:function(e){!function(e){var t,n=Object(w.a)(x.keys());try{for(n.s();!(t=n.n()).done;){var o=t.value,i=x.get(o),r=i.handlers.findIndex((function(t){return t.id===e}));if(-1!==r&&(i.handlers.splice(r,1),0===i.handlers.length)){console.log("[unsubscribeBars]: Unsubscribe from streaming. Channel:",o),k.send(JSON.stringify({type:"unsubscribe",symbol:o})),x.delete(o);break}}}catch(s){n.e(s)}finally{n.f()}}(e)}},A=n(568),P=n(570),R=n(571);function T(){var e=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search);return null===e?null:decodeURIComponent(e[1].replace(/\+/g," "))}var F={symbol:"AAPL",interval:"D",containerId:"tv_chart_container",datafeedUrl:"https://demo_feed.tradingview.com",libraryPath:"/static/js/charting_library/",chartsStorageUrl:"https://saveload.tradingview.com",chartsStorageApiVersion:"1.1",clientId:"tradingview.com",userId:"public_user_id",fullscreen:!1,autosize:!1,studiesOverrides:{}},D=null,E=null;function L(e){var t=e.symbol,n=e.prediction,i=e.didPredictionLookup,r=e.handleBackendPredictionLookup,s=N();return Object(o.useEffect)((function(){var e={symbol:t||F.symbol,datafeed:I,interval:F.interval,container_id:F.containerId,library_path:F.libraryPath,locale:T()||"en",disabled_features:["use_localstorage_for_settings","left_toolbar","header_symbol_search","display_market_status","header_screenshot","header_compare","header_indicators","compare_symbol","header_saveload","create_volume_indicator_by_default","control_bar","show_chart_property_page","countdown"],enabled_features:["study_templates"],charts_storage_url:F.chartsStorageUrl,charts_storage_api_version:F.chartsStorageApiVersion,client_id:F.clientId,user_id:F.userId,fullscreen:F.fullscreen,autosize:F.autosize,studies_overrides:F.studiesOverrides};if(E=new j(e),!1!==i||D||b(t,r),n&&(D||(D=n,console.log("prediction set"),console.log(D))),null!==D&&null!==E){var o=(new Date).getTime()/1e3,s=function(e){var t=e.split("/");return e=t[2]+"-"+t[0]+"-"+t[1],new Date(e).getTime()/1e3}(D.prediction_date);E.onChartReady((function(){var e=E.chart(),t=e.getVisibleRange(),n=t.from;t.to;e.setVisibleRange({from:n,to:s});try{e.createMultipointShape([{time:o,channel:"close"},{time:s,price:D.upper_value,channel:"close"}],{shape:"trend_line",lock:!0,overrides:{linecolor:"#00ff00",linestyle:2}},null)}catch(i){console.log(i)}try{e.createMultipointShape([{time:o,channel:"close"},{time:s,price:D.lower_value,channel:"close"}],{shape:"trend_line",lock:!0,overrides:{linecolor:"#ff0000",linestyle:2}},null)}catch(i){console.log(i)}try{e.createMultipointShape([{time:o,channel:"close"},{time:s,price:D.future_value,channel:"close"}],{shape:"trend_line",lock:!0,overrides:{linecolor:"#000000",linestyle:2}},null)}catch(i){console.log(i)}}))}return function(){null!==E&&(E.remove(),E=null),D=null}}),[n]),Object(u.jsx)("div",{children:Object(u.jsx)(A.a,{className:s.root,children:Object(u.jsx)(P.a,{className:s.content,children:Object(u.jsx)("div",{id:F.containerId,className:"TVChartContainer"})})})})}var N=Object(R.a)({root:{marginTop:"15px"},content:{borderRadius:"50px"}});function U(e){var t=Object(o.useState)([]),n=Object(_.a)(t,2),i=n[0],r=n[1],s=Object(o.useState)([]),a=Object(_.a)(s,2),c=a[0],d=a[1],p=Object(o.useState)(!1),h=Object(_.a)(p,2),b=h[0],m=h[1],g=Object(o.useState)(!1),v=Object(_.a)(g,2),y=(v[0],v[1]),j=Object(o.useState)(null),w=Object(_.a)(j,2),O=w[0],k=w[1],x=Object(o.useState)(!1),S=Object(_.a)(x,2),C=S[0],I=S[1],A=function(e,t){if(200===t){var n=e.prediction,o=null!==n?{future_value:n.future_value,upper_value:n.upper_value,lower_value:n.lower_value,prediction_date:e.prediction_date}:null;k(o),y(!0),I(!0)}else alert("Unable to find prediction")};return Object(o.useEffect)((function(){var t=Object(l.a)(e.newStocks).concat(i);t.length!==c.length&&d(t)}),[e.newStocks,c,i]),Object(o.useEffect)((function(){if(!1===b){f("POST","/stocks/",(function(e,t){200===t?(r(Object(l.a)(e)),m(!0)):alert("Error, status:",t)}))}}),[i,b,m]),Object(u.jsx)("div",{children:null!==c&&c.map((function(e,t){return Object(u.jsx)(V,{stock:e,length:c.length,didPredictionLookup:C,prediction:O,handleBackendPredictionLookup:A},t)}))})}var B=n(572),W=Object(R.a)((function(e){return{button:{background:"linear-gradient(180deg, #FE6B8B 30%, #E8A87C 90%)",marginLeft:"5px",marginRight:"5px",borderRadius:"50px","&:hover":{background:"linear-gradient(180deg, #FE6B8B 0%, #E8A87C 0%)"}}}}));function z(e){var t=W(),n=e.ticker,o=e.isTracking,i=e.predict,r=e.handleActionBackend,s=function(e){e.preventDefault(),function(e,t,n){t?f("POST","/prediction/create",n,{ticker:e}):f("POST","/stocks/".concat(e,"/action"),n)}(n,i,r)},a=!0===o?"Remove":"Add";return!0===i?Object(u.jsx)(B.a,{variant:"contained",className:t.button,onClick:s,children:"Predict"}):Object(u.jsxs)(B.a,{variant:"contained",className:t.button,onClick:s,children:[" ",a," "]})}var H=n(573),M=n(574),q=n(41),J=n(591);function V(e){var t=e.stock,n=e.length,i=e.didPredictionLookup,r=e.prediction,s=e.handleBackendPredictionLookup,a=Object(o.useState)(1),c=Object(_.a)(a,2),l=c[0],d=c[1],f=Object(o.useState)(1),m=Object(_.a)(f,2),g=m[0],v=m[1],y=Object(o.useState)(0),j=Object(_.a)(y,2),w=j[0],k=j[1],x=Object(o.useState)(null),S=Object(_.a)(x,2),C=S[0],I=S[1],R=X(),T=function(){var e=Object(h.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://finnhub.io/api/v1/quote?symbol=".concat(t.ticker,"&token=").concat(O));case 2:return e.next=4,e.sent.json();case 4:n=e.sent,console.log("Filled",n),v(n.o),d(n.c),k((l-g)/g);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){!1!==i||C||b(t.ticker,s),r&&!C&&I(r);var e=setInterval((function(){T()}),5e3*n);return function(){I(null),clearInterval(e)}}),[i,s,r]),Object(u.jsx)(H.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"space-evenly",children:Object(u.jsxs)(A.a,{className:R.root,children:[Object(u.jsx)(M.a,{className:R.header,title:t.company_name,subheader:t.ticker}),Object(u.jsx)(P.a,{children:Object(u.jsxs)(H.a,{container:!0,direction:"row",alignContent:"flex-start",justify:"space-evenly",children:[Object(u.jsxs)(H.a,{item:!0,direction:"column",alignItems:"flex-start",justify:"space-evenly",children:[Object(u.jsxs)(q.a,{children:["Current Price: ",l.toFixed(2)]}),Object(u.jsxs)(q.a,{children:["Percent Change: (",w>=0&&"+",(100*w).toFixed(2),"%)"]})]}),Object(u.jsx)(H.a,{item:!0,direction:"center",alignItems:"flex-end",justify:"space-evenly",children:Object(u.jsx)(B.a,{className:R.button,variant:"contained",onClick:function(e){e.preventDefault(),window.location.href="/stocks/".concat(t.ticker.toUpperCase())},children:"Details"})})]})})]})})}var X=Object(R.a)({root:{background:"linear-gradient(180deg, #FE6B8B 30%, #E8A87C 90%)",marginTop:"5px",marginBottom:"5px",borderRadius:"50px",width:425},header:{textAlign:"center"},prediction:{background:"linear-gradient(180deg, #FE6B8B 30%, #E8A87C 90%)",marginLeft:"5px"},button:{backgroundColor:"white",color:"black"}});function Y(e){var t=e.tickerinit,n=Object(o.useState)(!1),i=Object(_.a)(n,2),r=i[0],s=i[1],a=Object(o.useState)(null),c=Object(_.a)(a,2),l=c[0],d=c[1],p=Object(o.useState)(!1),h=Object(_.a)(p,2),b=h[0],m=h[1],g=Object(o.useState)(!1),v=Object(_.a)(g,2),y=(v[0],v[1]),j=Object(o.useState)(null),w=Object(_.a)(j,2),O=w[0],k=w[1],x=Object(o.useState)(!1),S=Object(_.a)(x,2),C=S[0],I=S[1],A=function(e,t){200===t?(d(e.ticker),m(e.is_tracking)):alert("Error finding stock")},P=function(e,t){if(200===t){var n=e.prediction,o=null!==n?{future_value:n.future_value,upper_value:n.upper_value,lower_value:n.lower_value,prediction_date:e.prediction_date}:null;k(o),y(!0),I(!0)}else alert("Unable to find prediction")},R=function(e,t){if(200===t&&b)m(!1),y(!1),k(null),d(e.ticker);else if(200!==t||b)if(201===t&&b){var n=e.prediction,o={future_value:n.future_value,upper_value:n.upper_value,lower_value:n.lower_value,prediction_date:e.prediction_date};k(o),y(!0)}else alert("cant add/remove, status:",t);else m(!0)};return Object(o.useEffect)((function(){!1===r&&(!function(e,t){f("GET","/stocks/".concat(e),t)}(t,A),s(!0))}),[t,r,s]),null===l?null:Object(u.jsx)("div",{children:Object(u.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(u.jsx)(L,{symbol:l,didPredictionLookup:C,prediction:O,handleBackendPredictionLookup:P,className:e.className}),Object(u.jsx)(G,{ticker:l,didPredictionLookup:C,prediction:O,handleBackendPredictionLookup:P}),Object(u.jsxs)(H.a,{container:!0,direction:"row",alignItems:"center",justify:"center",children:[Object(u.jsx)(z,{ticker:l,predict:!1,isTracking:b,handleActionBackend:R}),b&&Object(u.jsx)(z,{ticker:l,predict:!0,isTracking:b,handleActionBackend:R})]})]})})}function G(e){var t=e.ticker,n=e.prediction,i=e.didPredictionLookup,r=e.handleBackendPredictionLookup,s=X();return Object(o.useEffect)((function(){i||b(t,r)})),null!==n?Object(u.jsxs)("div",{className:"mb-1",children:[Object(u.jsx)("p",{}),Object(u.jsx)(J.a,{label:"Predicted Price: $"+n.future_value.toFixed(2),className:s.prediction}),Object(u.jsx)(J.a,{label:"Range: $"+n.lower_value.toFixed(2)+" to $"+n.upper_value.toFixed(2),className:s.prediction}),Object(u.jsx)(J.a,{label:"Date: "+n.prediction_date,className:s.prediction})]}):null}var $=n(96),K=n(589),Z=n(10),Q=n(575);function ee(e){var t=te(),n=Object(o.useState)(""),i=Object(_.a)(n,2),r=i[0],s=i[1],a=Object(o.useState)([]),c=Object(_.a)(a,2),d=(c[0],c[1]);return Object(o.useEffect)((function(){!function(e,t){f("POST","/stocks/search",t,{searchTerm:e})}(r,(function(e,t){200===t?d(Object(l.a)(e)):403===t?alert("Unauthorized, must login to access"):alert("Error finding stock, status:",t)}))}),[r]),Object(u.jsxs)("div",{className:t.search,children:[Object(u.jsx)("div",{className:t.searchIcon,children:Object(u.jsx)(Q.a,{button:!0})}),Object(u.jsx)(K.a,{autoComplete:"true",type:"text",value:r,onChange:function(e){s(e.target.value)},onKeyDown:function(e){13==e.keyCode&&(console.log(e.target),window.location.href="/stocks/".concat(r.toUpperCase()))},placeholder:"Ticker...",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},list:"stocks"})]})}var te=Object(R.a)((function(e){return{search:Object($.a)({position:"relative",borderRadius:"50px",backgroundColor:Object(Z.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Z.c)(e.palette.common.white,.25)},marginLeft:0,width:"50%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"50%"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(3,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"}}})),ne=n(587),oe=n(588),ie=n(576),re=n(577),se=n(578),ae=n(579),ce=n(581),le=n(582),ue=n(592),de=n(583),pe=n(584),he=n(586),_e=n(590),fe=n(580),be=n(585),me=(n(549),n(50),[{title:"Profile",path:"/profile"},{title:"Logout",path:"/logout"}]),ge=Object(R.a)((function(e){return{colorScheme:{background:"linear-gradient(180deg, #FE6B8B 30%, #E8A87C 90%)"},navDisplayFlex:{display:"flex",justifyContent:"space-between"},navbarDisplayFlex:{display:"flex",justifyContent:"space-between"},linkText:{textDecoration:"none",textTransform:"none",color:"white","&:hover":{color:"white",textDecoration:"none"}},scrollTop:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}}}));function ve(e){var t=e.children,n=Object(he.a)({disableHysteresis:!0,threshold:0});return i.a.cloneElement(t,{elevation:n?4:0})}function ye(e){var t=e.children,n=e.window,o=ge(),i=Object(he.a)({target:n?n():void 0,disableHysteresis:!0,threshold:100});return Object(u.jsx)(_e.a,{in:i,children:Object(u.jsx)("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:o.scrollTop,children:t})})}function je(e){return Object(u.jsx)("span",{onClick:function(e){e.preventDefault(),window.location.href="/"},children:"Home"})}function we(e){return Object(u.jsx)("span",{onClick:function(e){e.preventDefault(),window.location.href="/profile"},children:"Profile"})}var Oe=i.a.createElement,ke=document.getElementById("stocks-list");ke&&s.a.render(Oe((function(e){var t=Object(o.useState)([]),n=Object(_.a)(t,2),i=n[0];return n[1],Object(u.jsxs)("div",{className:e.className,children:[Object(u.jsx)(U,Object(c.a)({newStocks:i},e)),Object(u.jsx)("br",{})]})}),ke.dataset),ke);var xe=document.getElementById("navbar");xe&&s.a.render(Oe((function(e){return Object(u.jsx)(se.a,{children:Object(u.jsxs)(ne.a,{className:"navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow",children:[Object(u.jsxs)(oe.a,{children:[" ",Object(u.jsx)(ee,{})," "]}),Object(u.jsxs)(oe.a,{children:[" ",Object(u.jsx)(je,{})," "]}),Object(u.jsxs)(oe.a,{children:[" ",Object(u.jsx)(we,{})," "]})]})})}),xe.dataset),xe),document.querySelectorAll(".stock-detail").forEach((function(e){s.a.render(Oe(Y,e.dataset),e)}));var Se=document.getElementById("test");Se&&s.a.render(Oe((function(e){var t=ge();return Object(u.jsxs)(i.a.Fragment,{children:[Object(u.jsx)(ie.a,{id:"back-to-top-anchor"}),Object(u.jsx)(ve,Object(c.a)(Object(c.a)({},e),{},{children:Object(u.jsx)(re.a,{className:t.colorScheme,children:Object(u.jsx)(ie.a,{id:"back-to-top-anchor",children:Object(u.jsxs)(se.a,{maxWidth:"xl",className:t.navbarDisplayFlex,children:[Object(u.jsx)(ae.a,{href:"/",className:t.linkText,edge:"start",color:"inherit","aria-label":"home",children:Object(u.jsx)(fe.a,{fontSize:"large"})}),Object(u.jsx)(ee,{}),Object(u.jsx)(ce.a,{component:"nav","aria-labelledby":"main navigation",className:t.navDisplayFlex,children:me.map((function(e){var n=e.title,o=e.path;return Object(u.jsx)(le.a,{href:o,className:t.linkText,underline:"always",children:Object(u.jsx)(ue.a,{button:!0,children:Object(u.jsx)(de.a,{primary:n})})},n)}))})]})})})})),Object(u.jsx)(ye,Object(c.a)(Object(c.a)({},e),{},{children:Object(u.jsx)(pe.a,{className:t.colorScheme,size:"small","aria-label":"scroll back to top",children:Object(u.jsx)(be.a,{})})}))]})}),Se.dataset),Se),a()}},[[550,1,2]]]);
//# sourceMappingURL=main.4c503832.chunk.js.map